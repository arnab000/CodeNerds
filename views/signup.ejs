<html>

<head>
    <title>CodeNerds</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/public/bower_componants/bootstrap/dist/css/me.css">


</head>

<body>


    <form id="myform1" onsubmit="return doRegister(this);">
        <div class="form-group">

            <label>
                <p class="label-txt">ENTER YOUR NAME</p>
                <input type="text" required name="name" class="input" />
                <div class="line-box">
                    <div class="line"></div>
                </div>
            </label>
            <i class="mtrl-select"></i>

        </div>

        <div class="form-group">
            <label>
                <p class="label-txt">ENTER YOUR USERNAME</p>
                <input type="text" required name="username" class="input" />
                <div class="line-box">
                    <div class="line"></div>
                </div>
            </label>
            <i class="mtrl-select"></i>
        </div>

        <div class="form-group">
            <label>
                <p class="label-txt">ENTER YOUR EMAIL</p>
                <input type="text" required name="email" class="input" />
                <div class="line-box">
                    <div class="line"></div>
                </div>
            </label>
            <i class="mtrl-select"></i>
        </div>


        <div class="form-group">
            <label>
                <p class="label-txt">ENTER YOUR PASSWORD</p>
                <input type="password" required name="password" class="input" />
                <div class="line-box">
                    <div class="line"></div>
                </div>
            </label>
            <i class="mtrl-select"></i>
        </div>

        <a href="/login">Already have an account</a>
        <div class="submit-btns">
            <button class="mtr-btn signup" name="submit" type="submit">
                <span>Register</span>
            </button>
    </form>
    <script>
        $(document).ready(function(){
    
            $('.input').focus(function(){
              $(this).parent().find(".label-txt").addClass('label-active');
            });
          
            $(".input").focusout(function(){
              if ($(this).val() == '') {
                $(this).parent().find(".label-txt").removeClass('label-active');
              };
            });
          
          });
        </script>

    <script>
        function doRegister(form) {

            form.submit.setAttribute("disabled", "disabled");
            form.submit.innerHTML = "<span> Loading...</span>";
            var ajax = new XMLHttpRequest();
            ajax.open("POST", "/signup", true);
            ajax.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    form.submit.removeAttribute("disabled");
                    form.submit.innerHTML = "<span> Register</span>";
                    var response = JSON.parse(this.responseText);
                    alert(response.message)
                    if (response.status == "success") {
                        window.location.href = "/login";
                    }
                }
            }
            ajax.send(new FormData(form));
            document.getElementById("myform1").reset()
            return false;
        }
    </script>
</body>

</html>